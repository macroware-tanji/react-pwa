(this["webpackJsonpreact-pwa"]=this["webpackJsonpreact-pwa"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),a=n(14),i=n.n(a),r=(n(19),n(3)),s=n(4),l=n(6),u=n(5),h=(n(20),n(2)),d=n(8),f=n(0),m=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("Home.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("Home.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("Home.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Home"})})}}]),n}(o.Component),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("Page1.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("Page1.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("Page1.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Page1"})})}}]),n}(o.Component),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("Me.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("Me.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("Me.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Me"})})}}]),n}(o.Component),j=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;Object(r.a)(this,n),console.log("Others.constructor");var c=(o=t.call(this,e)).props.params.id;return o.is=c,console.log(c),o}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("Others.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("Others.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsxs)("h1",{children:["Others ",this.is]})})}}]),n}(o.Component);function b(){var e=Object(h.h)();return Object(f.jsx)(j,{params:e})}var O=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("About.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("About.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("About.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"About"})})}}]),n}(o.Component),p=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("Contact.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("Contact.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("Contact.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Contact"}),Object(f.jsx)("a",{href:"tel:0000000000",children:"0000000000"})]})}}]),n}(o.Component),k=n(9),R=n(10),x=(n(22),n.p+"static/media/FacePositionMask2.646f4e6b.svg"),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(r.a)(this,n),console.log("Camera.constructor"),(o=t.call(this,e)).state={imageLoaded:!1,x1:0,y1:0,x2:0,y2:0},o.inputFile=c.a.createRef(),o.imgRef=c.a.createRef(),o.canvasRef=c.a.createRef(),o.imgMaskRef=c.a.createRef(),o.ctx=null,o.onChange=o.onChange.bind(Object(R.a)(o)),o.onClickChoosePhoto=o.onClickChoosePhoto.bind(Object(R.a)(o)),o.imgPosX=0,o.imgPosY=0,o.imgZoomRate=1,o}return Object(s.a)(n,[{key:"initZoomAndMove",value:function(){var e=this;this.onTouchStart=function(t){t.preventDefault();var n,o=e.canvasRef.current.getBoundingClientRect(),c=t.changedTouches,a=Object(k.a)(c);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=i.clientX,s=i.clientY;r-=o.left,s-=o.top;var l=i.identifier;e.toucheInfos[l]={x:r,y:s}}}catch(u){a.e(u)}finally{a.f()}},this.onTouchEnd=function(t){t.preventDefault();var n,o=t.changedTouches,c=Object(k.a)(o);try{for(c.s();!(n=c.n()).done;){var a=n.value.identifier;delete e.toucheInfos[a]}}catch(i){c.e(i)}finally{c.f()}},this.onTouchCancel=function(t){t.preventDefault();var n,o=t.changedTouches,c=Object(k.a)(o);try{for(c.s();!(n=c.n()).done;){var a=n.value.identifier;delete e.toucheInfos[a]}}catch(i){c.e(i)}finally{c.f()}},this.onTouchMove=function(t){t.preventDefault();var n=e.canvasRef.current.getBoundingClientRect(),o=e.canvasRef.current.width,c=e.canvasRef.current.height,a=n.width,i=n.height,r=t.changedTouches;if(1===Object.keys(e.toucheInfos).length){for(var s=0,l=0,u=0,h=0,d=0,f=Object.keys(e.toucheInfos);d<f.length;d++){var m=f[d];s=e.toucheInfos[m].x,l=e.toucheInfos[m].y}var g,v=Object(k.a)(r);try{for(v.s();!(g=v.n()).done;){var j=g.value,b=j.identifier;e.toucheInfos[b]&&(u=j.clientX,h=j.clientY,u-=n.left,h-=n.top,e.toucheInfos[b]={x:u,y:h})}}catch(_){v.e(_)}finally{v.f()}var O=(u-s)*o/a,p=(h-l)*c/i;console.log("(dx:".concat(O,",dy:").concat(p,")")),e.imgPosX+=O,e.imgPosY+=p,e.ctx.drawImage(e.imgRef.current,0,0,e.imgRef.current.width,e.imgRef.current.height,e.imgPosX,e.imgPosY,e.imgRef.current.width*e.imgZoomRate,e.imgRef.current.height*e.imgZoomRate),e.ctx.drawImage(e.imgMaskRef.current,0,0,e.canvasRef.current.width,e.canvasRef.current.height)}else if(2===Object.keys(e.toucheInfos).length){for(var R=[],x=[],C=0,y=Object.keys(e.toucheInfos);C<y.length;C++){var w=y[C];R.push(e.toucheInfos[w].x),x.push(e.toucheInfos[w].y)}var M,P=Math.sqrt(Math.pow(R[0]-R[1],2)+Math.pow(x[0]-x[1],2)),I=!0,E=[],U=Object(k.a)(r);try{for(U.s();!(M=U.n()).done;){var W=M.value.identifier;e.toucheInfos[W]||(console.log("not exists ".concat(W)),I=!1),E.push(W)}}catch(_){U.e(_)}finally{U.f()}I||(console.dir(Object.keys(e.toucheInfos)),console.dir(E));var D,L=Object(k.a)(r);try{for(L.s();!(D=L.n()).done;){var T=D.value,B=T.clientX,A=T.clientY;B-=n.left,A-=n.top;var S=T.identifier;e.toucheInfos[S]={x:B,y:A}}}catch(_){L.e(_)}finally{L.f()}for(var N=[],X=[],Y=0,F=Object.keys(e.toucheInfos);Y<F.length;Y++){var H=F[Y];N.push(e.toucheInfos[H].x),X.push(e.toucheInfos[H].y)}var Z=Math.sqrt(Math.pow(N[0]-N[1],2)+Math.pow(X[0]-X[1],2))/P,G=(N[0]+N[1])/2*o/a,q=(X[0]+X[1])/2*c/i;e.imgZoomRate*=Z,e.imgPosX=G+(e.imgPosX-G)*Z,e.imgPosY=q+(e.imgPosY-q)*Z,e.ctx.drawImage(e.imgRef.current,0,0,e.imgRef.current.width,e.imgRef.current.height,e.imgPosX,e.imgPosY,e.imgRef.current.width*e.imgZoomRate,e.imgRef.current.height*e.imgZoomRate),e.ctx.drawImage(e.imgMaskRef.current,0,0,e.canvasRef.current.width,e.canvasRef.current.height),console.log("(rate:".concat(Z," imgPosX:").concat(e.imgPosX," imgPosY:").concat(e.imgPosY," )"))}else{var z,J=Object(k.a)(r);try{for(J.s();!(z=J.n()).done;){var $=z.value,K=$.clientX,Q=$.clientY;K-=n.left,Q-=n.top;var V=$.identifier;e.toucheInfos[V]={x:K,y:Q}}}catch(_){J.e(_)}finally{J.f()}}},this.toucheInfos={}}},{key:"addZoomAndMoveHandlers",value:function(){this.toucheInfos={},this.canvasRef.current.addEventListener("touchstart",this.onTouchStart,!1),this.canvasRef.current.addEventListener("touchend",this.onTouchEnd,!1),this.canvasRef.current.addEventListener("touchcancel",this.onTouchCancel,!1),this.canvasRef.current.addEventListener("touchmove",this.onTouchMove,!1)}},{key:"removeZoomAndMoveHandlers",value:function(){this.toucheInfos={},this.canvasRef.current.removeEventListener("touchstart",this.onTouchStart),this.canvasRef.current.removeEventListener("touchend",this.onTouchEnd),this.canvasRef.current.removeEventListener("touchcancel",this.onTouchCancel),this.canvasRef.current.removeEventListener("touchmove",this.onTouchMove)}},{key:"componentDidMount",value:function(){console.log("Camera.componentDidMount"),this.canvasRef.current.width=1080,this.canvasRef.current.height=1080,this.ctx=this.canvasRef.current.getContext("2d"),this.initZoomAndMove()}},{key:"componentWillUnmount",value:function(){console.log("Camera.componentWillUnmount")}},{key:"onChange",value:function(e){var t=this;if(console.log("onChange"),console.dir(e,{depth:null}),e.target.files.length){var n=e.target.files[0],o=new FileReader;o.addEventListener("load",(function(e){var n=o.result;t.imgRef.current.src=n,t.imgRef.current.onload=function(){console.log("canvasRef.current.width:".concat(t.canvasRef.current.width)),console.log("canvasRef.current.height:".concat(t.canvasRef.current.height)),console.log("imgRef.current.width:".concat(t.imgRef.current.width)),console.log("imgRef.current.height:".concat(t.imgRef.current.height)),console.log("imgMaskRef.current.width:".concat(t.imgMaskRef.current.width)),console.log("imgMaskRef.current.height:".concat(t.imgMaskRef.current.height));var e=t.canvasRef.current.width/t.imgRef.current.width,n=t.canvasRef.current.height/t.imgRef.current.height,o=e<n?e:n;console.log("rate:".concat(o));var c=t.imgRef.current.width*o,a=t.imgRef.current.height*o;console.log("dstWidth:".concat(c)),console.log("dstHeight:".concat(a));var i=t.canvasRef.current.width/2-c/2,r=t.canvasRef.current.height/2-a/2;console.log("dstPosX:".concat(i)),console.log("dstPosY:".concat(r)),t.ctx.drawImage(t.imgRef.current,0,0,t.imgRef.current.width,t.imgRef.current.height,i,r,c,a),t.ctx.drawImage(t.imgMaskRef.current,0,0,t.canvasRef.current.width,t.canvasRef.current.height),t.imgPosX=i,t.imgPosY=r,t.imgZoomRate=o,t.imgRef.current.onload=function(){},t.setState({imageLoaded:!0}),t.removeZoomAndMoveHandlers(),t.addZoomAndMoveHandlers()}})),o.readAsDataURL(n)}}},{key:"onClickChoosePhoto",value:function(e){this.inputFile.current.click()}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Camera"}),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"file",className:"camera--hidden",ref:this.inputFile,onChange:this.onChange,accept:"image/png , image/jpeg"}),Object(f.jsx)("button",{onClick:this.onClickChoosePhoto,children:"choose photo"})]}),Object(f.jsx)("div",{children:Object(f.jsx)("img",{className:"camera--img camera--hidden",alt:"img",ref:this.imgRef})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("canvas",{className:"camera--canvas",ref:this.canvasRef}),Object(f.jsx)("img",{src:x,alt:"mask",ref:this.imgMaskRef,className:"camera--hidden"})]})]})}}]),n}(o.Component),y=(n(23),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(r.a)(this,n),console.log("Camera2.constructor"),(o=t.call(this,e)).state={takeButtonEnable:!1,retakeButtonEnable:!1,startCameraButtonEnable:!1},o.videoRef=c.a.createRef(),o.canvasRef=c.a.createRef(),o.imgMaskRef=c.a.createRef(),o.onClickTake=o.onClickTake.bind(Object(R.a)(o)),o.onClickRetake=o.onClickRetake.bind(Object(R.a)(o)),o.onClickStartCamera=o.onClickStartCamera.bind(Object(R.a)(o)),o.ctx=null,o}return Object(s.a)(n,[{key:"startCamera",value:function(){var e=this,t=navigator.mediaDevices||(navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(e){return new Promise((function(t,n){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,e,t,n)}))}}:null);t?t.getUserMedia({audio:!1,video:{width:1080,height:1080,facingMode:"user"}}).then((function(t){console.log("then"),console.dir(t,{depth:null}),e.videoRef.current.onerror=function(t){alert(t),e.videoRef.current.onerror=function(){}},e.videoRef.current.srcObject=t,e.setState({takeButtonEnable:!0,retakeButtonEnable:!1,startCameraButtonEnable:!1})})).catch((function(t){console.log(t),console.dir(t),e.setState({takeButtonEnable:!1,retakeButtonEnable:!1,startCameraButtonEnable:!0}),alert(t)})):(console.log("getUserMedia() not supported."),alert("getUserMedia() not supported."))}},{key:"componentDidMount",value:function(){console.log("Camera2.componentDidMount"),this.canvasRef.current.width=1080,this.canvasRef.current.height=1080,this.ctx=this.canvasRef.current.getContext("2d"),this.videoRef.current.addEventListener("loadedmetadata",(function(e){console.log("loadedmetadata")})),this.videoRef.current.addEventListener("loadeddata",(function(e){console.log("loadeddata")})),this.startCamera()}},{key:"componentWillUnmount",value:function(){console.log("Camera2.componentWillUnmount");try{this.videoRef.current.pause()}catch(e){}}},{key:"onClickTake",value:function(e){this.videoRef.current.pause(),console.log("this.imgMaskRef.current.width:".concat(this.imgMaskRef.current.width)),console.log("this.imgMaskRef.current.height:".concat(this.imgMaskRef.current.height)),this.ctx.drawImage(this.videoRef.current,0,0,this.canvasRef.current.width,this.canvasRef.current.height),this.ctx.drawImage(this.imgMaskRef.current,0,0,this.canvasRef.current.width,this.canvasRef.current.height),this.videoRef.current.classList.contains("camera2--hidden")||this.videoRef.current.classList.add("camera2--hidden"),this.canvasRef.current.classList.contains("camera2--hidden")&&this.canvasRef.current.classList.remove("camera2--hidden"),this.setState({takeButtonEnable:!1,retakeButtonEnable:!0})}},{key:"onClickRetake",value:function(e){this.videoRef.current.classList.contains("camera2--hidden")&&this.videoRef.current.classList.remove("camera2--hidden"),this.canvasRef.current.classList.contains("camera2--hidden")||this.canvasRef.current.classList.add("camera2--hidden"),this.videoRef.current.play(),this.setState({takeButtonEnable:!0,retakeButtonEnable:!1})}},{key:"onClickStartCamera",value:function(e){this.startCamera()}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Camera2"}),Object(f.jsx)("div",{children:Object(f.jsx)("video",{className:"camera2--video",ref:this.videoRef,autoPlay:!0,playsInline:!0,muted:!0})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("canvas",{className:"camera2--canvas camera2--hidden",ref:this.canvasRef}),Object(f.jsx)("img",{src:x,alt:"mask",ref:this.imgMaskRef,className:"camera2--hidden"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:this.onClickTake,disabled:!this.state.takeButtonEnable,children:"\u30b7\u30e3\u30c3\u30bf\u30fc"}),Object(f.jsx)("button",{onClick:this.onClickRetake,disabled:!this.state.retakeButtonEnable,children:"\u64ae\u308a\u76f4\u3057"}),Object(f.jsx)("button",{onClick:this.onClickStartCamera,disabled:!this.state.startCameraButtonEnable,children:"\u30ab\u30e1\u30e9\u30ea\u30b9\u30bf\u30fc\u30c8"})]})]})}}]),n}(o.Component)),w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("NotFound.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("NotFound.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("NotFound.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"NotFound"}),Object(f.jsx)("p",{children:Object(f.jsx)(d.b,{to:"/",children:"Go to the home page"})})]})}}]),n}(o.Component);function M(){var e=Object(h.g)(),t=function(t){"home"===t.target.name?e("/"):"page1"===t.target.name?e("/page1"):"about"===t.target.name?e("/about"):"contact"===t.target.name?e("/contact"):"camera"===t.target.name?e("/camera"):"camera2"===t.target.name&&e("/camera2")};return Object(f.jsxs)("div",{children:[Object(f.jsxs)("nav",{children:[Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/",children:"Home"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/page1",children:"Page1"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/about",children:"About"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/contact",children:"Contact"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/camera",children:"Camera"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/camera2",children:"Camera2"})}),Object(f.jsx)("li",{children:Object(f.jsx)(d.b,{to:"/nothing-here",children:"Nothing Here"})})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:t,name:"home",children:"Home"}),Object(f.jsx)("button",{onClick:t,name:"page1",children:"Page1"}),Object(f.jsx)("button",{onClick:t,name:"about",children:"About"}),Object(f.jsx)("button",{onClick:t,name:"contact",children:"Contact"}),Object(f.jsx)("button",{onClick:t,name:"camera",children:"Camera"}),Object(f.jsx)("button",{onClick:t,name:"camera2",children:"Camera2"})]})]}),Object(f.jsx)("hr",{}),Object(f.jsx)(h.a,{})]})}var P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),console.log("App.constructor"),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){console.log("App.componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("App.componentWillUnmount")}},{key:"render",value:function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Hello React Pwa v0.0004"}),Object(f.jsx)("div",{}),Object(f.jsx)(h.d,{children:Object(f.jsxs)(h.b,{exact:!0,path:"/",element:Object(f.jsx)(M,{}),children:[Object(f.jsx)(h.b,{index:!0,element:Object(f.jsx)(m,{})}),Object(f.jsx)(h.b,{path:"page1",element:Object(f.jsx)(g,{})}),Object(f.jsx)(h.b,{path:"page1/:id",element:Object(f.jsx)(b,{})}),Object(f.jsx)(h.b,{path:"page1/me",element:Object(f.jsx)(v,{})}),Object(f.jsx)(h.b,{path:"about",element:Object(f.jsx)(O,{})}),Object(f.jsx)(h.b,{path:"contact",element:Object(f.jsx)(p,{})}),Object(f.jsx)(h.b,{path:"camera",element:Object(f.jsx)(C,{})}),Object(f.jsx)(h.b,{path:"camera2",element:Object(f.jsx)(y,{})}),Object(f.jsx)(h.b,{path:"*",element:Object(f.jsx)(w,{})})]})})]})}}]),n}(o.Component),I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),a(e),i(e)}))};function W(){var e=Object(h.g)();return Object(f.jsx)(P,{navigate:e})}i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(d.a,{basename:"react-pwa",children:Object(f.jsx)(W,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-pwa","/service-worker.js");I?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):E(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):E(t,e)}))}}(),U()}},[[24,1,2]]]);
//# sourceMappingURL=main.d33a6d5b.chunk.js.map